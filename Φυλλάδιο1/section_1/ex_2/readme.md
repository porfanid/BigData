# Περιγραφή της Άσκησης

Ο μετρητής Morris λειτουργεί ως εξής:
```
integer C ← 0
void insert()
{
    C ← C+1, with probability 1/2^C
}
integer query()
{
    return 2^C - 1
}
```

Η άσκηση 2 αποτελείται από τα εξής υποερωτήματα:

- **α)** Υπολογισμός της πιθανότητας η C_1000 να έχει τιμές στο σύνολο {8, 9, 10, 11}.
- **β)** Υπολογισμός των πιθανοτήτων P(C_k = ⌈log_2(k+1)⌉), για k ∈ {1, ..., 1000} και σχεδιασμός γραφικής παράστασης.
- **γ)** Υπολογισμός των πιθανοτήτων P(C_k ∈ {l(k)-1, l(k), l(k)+1}), όπου l(k) = ⌈log_2(k+1)⌉, για k ∈ {1, 2, ..., 1000} και σχεδιασμός γραφικής παράστασης.
- **δ)** Υπολογισμός των πιθανοτήτων η C_k να είναι ακριβώς l(k) για όλα τα k ∈ {1, 2, ..., 1000} και η C_k να ανήκει στο σύνολο {l(k)-1, l(k), l(k)+1} για όλα τα k ∈ {1, 2, ..., 1000}.

## Μεθοδολογία

### Υποερώτημα α)

Για τον υπολογισμό της πιθανότητας η C_1000 να έχει τιμές στο σύνολο {8, 9, 10, 11}, χρησιμοποιήσαμε δυναμικό προγραμματισμό για να υπολογίσουμε τις πιθανότητες μετάβασης του μετρητή Morris. Η προσέγγιση βασίζεται στην αναδρομική σχέση:

- P(C_n = i) = P(C_{n-1} = i) * (1 - 1/2^i) + P(C_{n-1} = i-1) * (1/2^(i-1))

Όπου:
- P(C_n = i) είναι η πιθανότητα η μεταβλητή C να έχει τιμή i μετά από n εισαγωγές
- Ο πρώτος όρος αντιπροσωπεύει την πιθανότητα να παραμείνει στο i
- Ο δεύτερος όρος αντιπροσωπεύει την πιθανότητα να αυξηθεί από i-1 σε i

### Υποερώτημα β)

Για τον υπολογισμό των πιθανοτήτων P(C_k = ⌈log_2(k+1)⌉), επεκτείναμε την προσέγγιση του υποερωτήματος α) για όλα τα k από 1 έως 1000. Για κάθε k, υπολογίζουμε την τιμή l(k) = ⌈log_2(k+1)⌉ και στη συνέχεια την πιθανότητα P(C_k = l(k)).

### Υποερώτημα γ)

Παρόμοια με το υποερώτημα β), υπολογίζουμε τις πιθανότητες P(C_k ∈ {l(k)-1, l(k), l(k)+1}) για κάθε k από 1 έως 1000. Αυτό μας δίνει την πιθανότητα η εκτίμηση του μετρητή να είναι στο εύρος των τριών πιθανών τιμών γύρω από την "ιδανική" τιμή l(k).

### Υποερώτημα δ)

Για τον υπολογισμό των πιθανοτήτων η C_k να είναι ακριβώς l(k) για όλα τα k ∈ {1, 2, ..., 1000} και η C_k να ανήκει στο σύνολο {l(k)-1, l(k), l(k)+1} για όλα τα k ∈ {1, 2, ..., 1000}, χρησιμοποιούμε μια διαφορετική προσέγγιση. Αντί να υπολογίζουμε τις πιθανότητες για κάθε k ξεχωριστά, υπολογίζουμε την πιθανότητα να ισχύει η συνθήκη για όλα τα k ταυτόχρονα.